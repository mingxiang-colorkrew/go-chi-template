{
  "openapi": "3.0.0",
  "x-stoplight": {
    "id": "itbrpnesv8cwz"
  },
  "info": {
    "title": "v1-3.0",
    "version": "1.0",
    "description": "Test API"
  },
  "servers": [
    {
      "url": "http://localhost:3000"
    }
  ],
  "paths": {
    "/api/v1/tenant": {
      "post": {
        "summary": "",
        "operationId": "post-api-v1-tenant",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tenant": {
                      "$ref": "#/components/schemas/Tenant"
                    }
                  },
                  "required": [
                    "tenant"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errorCode": {
                      "type": "string",
                      "x-stoplight": {
                        "id": "rllkwwmo77ycn"
                      }
                    },
                    "errorMessage": {
                      "type": "string",
                      "x-stoplight": {
                        "id": "318rxk5s2c7f8"
                      }
                    },
                    "data": {
                      "$ref": "#/components/schemas/TenantCreateValidationError"
                    }
                  }
                }
              }
            }
          }
        },
        "description": "Creates a new tenant",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "x-stoplight": {
                      "id": "l640ydkl5vi2l"
                    }
                  },
                  "shortCode": {
                    "type": "string",
                    "x-stoplight": {
                      "id": "qbns5l6tvjzmv"
                    },
                    "minLength": 4,
                    "maxLength": 5
                  }
                },
                "required": [
                  "name",
                  "shortCode"
                ]
              }
            }
          }
        }
      },
      "parameters": [],
      "get": {
        "summary": "",
        "operationId": "get-api-v1-tenant",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tenants": {
                      "type": "array",
                      "x-stoplight": {
                        "id": "abxq0cdwy04ay"
                      },
                      "items": {
                        "$ref": "#/components/schemas/Tenant"
                      }
                    }
                  },
                  "required": [
                    "tenants"
                  ]
                }
              }
            }
          }
        },
        "description": "List all tenants in the application"
      }
    },
    "/api/v1/tenant/{tenantId}": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "tenantId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Get Tenant By ID",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tenant": {
                      "$ref": "#/components/schemas/Tenant"
                    }
                  },
                  "required": [
                    "tenant"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "x-stoplight": {
                        "id": "8eri3zah5eveq"
                      }
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get-api-v1-tenant-tenantId",
        "description": "Get details for 1 tenant"
      }
    },
    "/api/v1/user": {
      "get": {
        "summary": "Get all users",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "users": {
                      "type": "array",
                      "x-stoplight": {
                        "id": "no1eber5t0mk1"
                      },
                      "items": {
                        "$ref": "#/components/schemas/User"
                      }
                    }
                  },
                  "required": [
                    "users"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get-api-v1-user",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tenantId": {
                    "type": "string",
                    "x-stoplight": {
                      "id": "dxk6govsvrnvs"
                    }
                  }
                },
                "required": [
                  "tenantId"
                ]
              }
            }
          }
        },
        "description": "List all users for a tenant"
      },
      "post": {
        "summary": "",
        "operationId": "post-api-v1-user",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  },
                  "required": [
                    "user"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "errors": {
                      "type": "object",
                      "x-stoplight": {
                        "id": "53na03s5sgohk"
                      },
                      "properties": {
                        "name": {
                          "type": "array",
                          "x-stoplight": {
                            "id": "plfj5dibl189i"
                          },
                          "items": {
                            "x-stoplight": {
                              "id": "n6luib2o3uu3e"
                            },
                            "type": "string"
                          }
                        },
                        "email": {
                          "type": "array",
                          "x-stoplight": {
                            "id": "j1tkyzwzidcji"
                          },
                          "items": {
                            "x-stoplight": {
                              "id": "16036ktjfxps2"
                            },
                            "type": "string"
                          }
                        },
                        "role": {
                          "type": "array",
                          "x-stoplight": {
                            "id": "0ok9j36cw28n7"
                          },
                          "items": {
                            "x-stoplight": {
                              "id": "j27jtn8yqcp4t"
                            },
                            "type": "string"
                          }
                        },
                        "tenantId": {
                          "type": "array",
                          "x-stoplight": {
                            "id": "rims4uzr73il3"
                          },
                          "items": {
                            "x-stoplight": {
                              "id": "rfruzjxt6jwde"
                            },
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "x-stoplight": {
                      "id": "ql35fy8fab36q"
                    },
                    "nullable": true
                  },
                  "email": {
                    "type": "string",
                    "x-stoplight": {
                      "id": "kkqgedndn8gxm"
                    }
                  },
                  "role": {
                    "type": "string",
                    "x-stoplight": {
                      "id": "2nmfgn72yam4r"
                    }
                  },
                  "tenantId": {
                    "type": "string",
                    "x-stoplight": {
                      "id": "4jtp1ds0qzomc"
                    }
                  }
                },
                "required": [
                  "name",
                  "email",
                  "role",
                  "tenantId"
                ]
              }
            }
          }
        }
      }
    },
    "/api/v1/user/{userId}": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "userId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Get User By ID",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  },
                  "required": [
                    "user"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "x-stoplight": {
                        "id": "eae66flzsrrmi"
                      }
                    }
                  },
                  "required": [
                    "message"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get-api-v1-user-userId",
        "description": "Gets a single user with their tenant",
        "requestBody": {
          "content": {}
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Tenant": {
        "title": "Tenant",
        "x-stoplight": {
          "id": "ll8gjytmdcflr"
        },
        "type": "object",
        "x-examples": {
          "Tenant A": {
            "id": "123",
            "name": "Tenant A",
            "shortCode": "ck01",
            "createdAt": "2019-08-24T14:15:22Z",
            "updatedAt": "2019-08-24T14:15:22Z"
          }
        },
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "x-stoplight": {
              "id": "p6mta5h4inbga"
            }
          },
          "shortCode": {
            "type": "string",
            "x-stoplight": {
              "id": "bk29f93ygkv6w"
            },
            "minLength": 4,
            "maxLength": 5
          },
          "createdAt": {
            "type": "string",
            "x-stoplight": {
              "id": "zajfcu1d17uw5"
            },
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "x-stoplight": {
              "id": "4muy39fu375yx"
            },
            "format": "date-time"
          },
          "userCount": {
            "type": "integer",
            "x-stoplight": {
              "id": "1d5ce65ef24qj"
            }
          }
        },
        "required": [
          "id",
          "name",
          "shortCode"
        ]
      },
      "User": {
        "title": "User",
        "x-stoplight": {
          "id": "ylasvjugjbegz"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "x-stoplight": {
              "id": "5fsjcj7kpjcmm"
            }
          },
          "email": {
            "type": "string",
            "x-stoplight": {
              "id": "83jqzxar9lvns"
            }
          },
          "role": {
            "type": "string",
            "x-stoplight": {
              "id": "jsh6vgwiwtkuh"
            }
          },
          "tenant": {
            "$ref": "#/components/schemas/Tenant"
          }
        },
        "required": [
          "id"
        ]
      },
      "Review": {
        "title": "Review",
        "x-stoplight": {
          "id": "aqwr3p1nd7pdt"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "content": {
            "type": "string",
            "x-stoplight": {
              "id": "y0uo4gcb85gi3"
            }
          },
          "rating": {
            "type": "integer",
            "x-stoplight": {
              "id": "evvg5xq9oveap"
            }
          },
          "user": {
            "$ref": "#/components/schemas/User"
          }
        },
        "required": [
          "id"
        ]
      },
      "TenantCreateValidationError": {
        "title": "TenantCreateValidationError",
        "x-stoplight": {
          "id": "wj55zse6ktb2j"
        },
        "type": "object",
        "properties": {
          "name": {
            "type": "array",
            "x-stoplight": {
              "id": "47q77sax5wx82"
            },
            "items": {
              "x-stoplight": {
                "id": "ovtovv01ysar3"
              },
              "type": "string"
            }
          },
          "shortCode": {
            "type": "array",
            "x-stoplight": {
              "id": "0aerw9z56n4g0"
            },
            "items": {
              "x-stoplight": {
                "id": "248xkq2zwe1dw"
              },
              "type": "string"
            }
          }
        }
      }
    },
    "securitySchemes": {}
  }
}

